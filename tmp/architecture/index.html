<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI/ML Platform Architecture Diagrams</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#f4f4f4',
                primaryTextColor: '#333',
                primaryBorderColor: '#7C0000',
                lineColor: '#5D4037',
                secondaryColor: '#006100',
                tertiaryColor: '#fff'
            }
        });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .diagram-container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .mermaid {
            text-align: center;
            margin: 20px 0;
        }
        .description {
            margin: 10px 0;
            padding: 15px;
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        nav {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 20px;
        }
        nav a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }
        nav a:hover {
            text-decoration: underline;
        }
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
            opacity: 0.8;
        }
        .back-to-top:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <h1>AI/ML Deployment Platform Architecture</h1>
    
    <nav>
        <ul>
            <li><a href="#overview">System Overview</a></li>
            <li><a href="#deployment">Deployment Flow</a></li>
            <li><a href="#rag">RAG Architecture</a></li>
            <li><a href="#data">Data Flow</a></li>
            <li><a href="README.md">Documentation</a></li>
        </ul>
    </nav>

    <div id="overview" class="diagram-container">
        <h2>System Overview</h2>
        <div class="description">
            This diagram shows the overall system architecture, including client layer, API gateway, core services, 
            infrastructure layer, and storage components. The FastAPI server acts as the central hub, routing requests 
            to various service managers that interact with Kubernetes, MinIO, and MLflow.
        </div>
        <div class="mermaid" id="system-overview"></div>
    </div>

    <div id="deployment" class="diagram-container">
        <h2>Deployment Flow</h2>
        <div class="description">
            This sequence diagram illustrates the deployment process, from user request to pod creation. 
            It shows how the Deployment Manager interacts with Kubernetes to create deployments, 
            how pods pull model artifacts from MinIO, and the update flow for existing deployments.
        </div>
        <div class="mermaid" id="deployment-flow"></div>
    </div>

    <div id="rag" class="diagram-container">
        <h2>RAG (Retrieval-Augmented Generation) Architecture</h2>
        <div class="description">
            The RAG architecture diagram shows the flow from user query to generated response. 
            It includes the embedding process, vector database retrieval, context building, 
            and final response generation using the language model.
        </div>
        <div class="mermaid" id="rag-architecture"></div>
    </div>

    <div id="data" class="diagram-container">
        <h2>Data Flow Architecture</h2>
        <div class="description">
            This flowchart illustrates how data moves through the system, from API endpoints through 
            service layers to persistence and monitoring. It shows the relationships between different 
            data processing components including sessions, queues, caches, and event streams.
        </div>
        <div class="mermaid" id="data-flow"></div>
    </div>

    <a href="#" class="back-to-top">â†‘ Top</a>

    <script>
        // Load diagram content from .mmd files
        async function loadDiagram(filename, elementId) {
            try {
                const response = await fetch(filename);
                const content = await response.text();
                document.getElementById(elementId).textContent = content;
            } catch (error) {
                console.error(`Error loading ${filename}:`, error);
                document.getElementById(elementId).textContent = 'graph LR\n    Error[Failed to load diagram]';
            }
        }

        // Load all diagrams
        loadDiagram('system-overview.mmd', 'system-overview');
        loadDiagram('deployment-flow.mmd', 'deployment-flow');
        loadDiagram('rag-architecture.mmd', 'rag-architecture');
        loadDiagram('data-flow.mmd', 'data-flow');
    </script>
</body>
</html>